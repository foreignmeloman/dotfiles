plugins:
  # See https://k9scli.io/topics/plugins/
  raw-logs-follow:
    shortCut: Ctrl-L
    description: logs -f
    scopes:
    - po
    command: kubectl
    background: false
    args:
    - logs
    - -f
    - $NAME
    - -n
    - $NAMESPACE
    - --context
    - $CONTEXT
  log-less:
    shortCut: Shift-L
    description: "logs|less"
    scopes:
    - po
    command: bash
    background: false
    args:
    - -c
    - '"$@" | batcat -l log --wrap=never'
    - dummy-arg
    - kubectl
    - logs
    - $NAME
    - -n
    - $NAMESPACE
    - --context
    - $CONTEXT
  log-less-container:
    shortCut: Shift-L
    description: "logs|less"
    scopes:
    - containers
    command: bash
    background: false
    args:
    - -c
    - '"$@" | batcat -l log --wrap=never'
    - dummy-arg
    - kubectl
    - logs
    - -c
    - $NAME
    - $POD
    - -n
    - $NAMESPACE
    - --context
    - $CONTEXT
  tmux-shell:
    shortCut: w
    description: "tmux horizontal split shell"
    scopes:
    - po
    command: tmux
    background: false
    args:
    - split-window
    - -v
    - bash
    - -c
    - >-
      kubectl --context=$CONTEXT --namespace=$NAMESPACE exec -it $NAME -- /bin/sh 2> /dev/null ||
      kubectl --context=$CONTEXT --namespace=$NAMESPACE exec -it $NAME -- /bin/bash 2> /dev/null ||
      kubectl --context=$CONTEXT --namespace=$NAMESPACE exec -it $NAME -- /bin/ash
  tmux-shell-container:
    shortCut: w
    description: "tmux horizontal split shell"
    scopes:
    - containers
    command: tmux
    background: false
    args:
    - split-window
    - -v
    - bash
    - -c
    - >-
      kubectl --context=$CONTEXT --namespace=$NAMESPACE exec -it --container=$NAME $POD -- /bin/sh 2> /dev/null ||
      kubectl --context=$CONTEXT --namespace=$NAMESPACE exec -it --container=$NAME $POD -- /bin/bash 2> /dev/null ||
      kubectl --context=$CONTEXT --namespace=$NAMESPACE exec -it --container=$NAME $POD -- /bin/ash
